<!doctype html>
<html class="no-js" lang="ru-RU">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Работа с GnuPG. Шифрование и расшифровывание информации. Багаев Валерий - верстка сайтов, разработка на Javascript. Персональный сайт.</title>
    <meta name="description" content="">
    <!--<meta name="viewport" content="width=device-width, initial-scale=1">-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="stylesheet" href="/css/vendor/normalize.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/vendor/jquery.scrollbar/jquery.scrollbar.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/css/vendor/highlight.js/github.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js"></script>
    <script>
    hljs.initHighlightingOnLoad();
    </script>
    <!--<script src="/js/vendor/modernizr.js"></script>-->
</head>

<body>
    <!--[if lt IE 8]>
            <p class="browserupgrade">Вы используете <strong>устаревший</strong> браузер. Пожалуйста, <a href="http://browsehappy.com/">обновите ваш браузер,</a> чтобы улучшить отображение сайта и получить новые возможности.</p>
        <![endif]-->
    <div class="wrapper">
        <div class="maincontent">
            <header class="header">
                <div class="container">
                    <div class="header__left">
                        <div class="user">
                            <div class="user__avatar">
                            </div>
                            <div class="user__name">
                                Валерий Багаев
                            </div>
                        </div>
                    </div>
                    <div class="header__right">
                        <div class="contacts">
                            <a href="#" class="contacts__link">Мои контакты</a>
                            <ul class="contacts__dropdown">
                                <li class="triangle">
                                </li>
                                <li class="contacts__dropdown-item">
                                    <a href="mailto:valery.bagaev84@gmail.com" class="contacts__dropdown-item-a contacts__dropdown-item-a_mail">valery.bagaev84@gmail.com</a>
                                </li>
                                <li class="contacts__dropdown-item">
                                    <a href="tel:79603441269" class="contacts__dropdown-item-a contacts__dropdown-item-a_tel">+7 9603441269</a>
                                </li>
                                <li class="contacts__dropdown-item">
                                    <a href="skype:serking" class="contacts__dropdown-item-a contacts__dropdown-item-a_skype">serking</a>
                                </li>
                            </ul>
                        </div>
                        <div class="contacts__a-telbig"></div>
                    </div>
                </div>
            </header>
            <div class="content">
                <div class="container">
                    <aside class="sidebar">
                        <nav class="nav">
                            <ul class="nav__list">
                                <li class="nav__item nav__item_active">
                                    <a href="/about.html" class="nav__link nav__link_user-secret"><span class="nav__link-text">Обо мне</span></a>
                                </li>
                                <li class="nav__item">
                                    <a href="/skills.html" class="nav__link nav__link_book"><span class="nav__link-text">Мои навыки</span></a>
                                </li>
                                <li class="nav__item">
                                    <a href="/career.html" class="nav__link nav__link_rocket"><span class="nav__link-text">Карьерный путь</span></a>
                                </li>
                                <li class="nav__item">
                                    <a href="/portfolio.html" class="nav__link nav__link_briefcase"><span class="nav__link-text">Портфолио</span></a>
                                </li>
                                <li class="nav__item">
                                    <a href="/blog.html" class="nav__link nav__link_pensil"><span class="nav__link-text">Блог-note</span></a>
                                </li>
                            </ul>
                        </nav>
                    </aside>
                    <main class="page-content">
                        <div class="blog-item blog-item_details">
                            <h2 class="blog-item__title blog-item__title_details">Работа с GnuPG. Шифрование и расшифровывание информации.</h2>
                            <div class="blog-item__time blog-item__time_clock-o">
                                <span class="blog-item__timeline">
                                        11.04.2017 19:55
                                    </span>
                            </div>
                            <div class="blog-item__content blog-item__content_details">
                                <p>GnuPG — это программа и свободная библиотека для шифрование информации и создания электронных цифровых подписей. Она была разработана как альтернатива PGP, другой библиотеки шифрования, но уже не свободной.</p>
                                <p>GnuPG есть почти на всех ОС, будь то Windows, Linux или другие Unix-подобные операционные системы. Часто библиотека GnuPG ,бывает интегрирована в клиенты электронной почты, например Mutt, The Bat! и др.</p>
                                <p>Для пользователей Windows существует возможность установки пакета программ Gpg4win, который включает с себя: саму GnuPG, менеджер сертификатов Kleopatra, а также полноценную почтовую программу Claws Mail.</p>
                                <p>Стоит упомянуть также, что существуют плагины для мессенджеров мгновенных сообщений и большинства популярных браузеров.</p>
                                <p>Принцип работы GnuPG основан на ассиметричном шифровании. Каждый пользователь программы генерирует пару ключей (открытый и закрытый). Открытыми ключами пользователи обмениваются друг с другом любыми способами, в том числе с помощью серверов ключей. Также GnuPG позволяет добавлять криптографическую цифровую подпись к сообщению, при этом целостность и отправитель сообщения могут быть проверены. Закрытый ключ хранится у владельца в запароленном виде. Этот ключ используется для подписывания данных и расшифровывания зашифрованных файлов. Публичный же ключ используется для проверки подписи и шифрования данных.</p>
                                <p>Таким образом, если вы хотите кому-то отправить зашифрованный текст, который получатель сможет расшифровать, вы берёте публичный ключ этого пользователя, шифруете этим ключом данные, отправляете. Получатель берёт приватный ключ и расшифровывает сообщение.</p>
                                <p>Также если необходимо подписать какое-либо сообщение, вы берёте свой приватный ключ, создаете цифровую подпись сообщения и отправляете получателю. Получатель берёт ваш публичный ключ, текст и подпись, и удостоверяется что сообщение не изменено. Для шифрования использует такие алгоритмы как RSA, CAST5, 3DES, AES, Blowfish и Twofish.</p>
                                <h2 id="section">Установка продукта и создание пары ключей</h2>
                                <p>Установить программу можно скачав ее с официального <a href="https://www.gnupg.org/download/">сайта</a>, или из репозиториев вашего дистрибутива. Чтобы сгенерировать пару ключей используйте введите команду в терминал.</p>
                                <div class="highlighter-rouge"><pre class="codehilite"><code>gpg --gen-key
</code></pre></div>
                                <p>Или если версия программы 2.0 и выше</p>
                                <div class="highlighter-rouge"><pre class="codehilite"><code>gpg --full-gen-key
</code></pre></div>
                                <p>Программа потребует указать тип требуемого ключа, выберите желаемый, либо нажмите Enter, чтобы выбрать RSA по умолчанию.</p>
                                <p>Введите желаемый размер ключа. Рекомендуем максимальный размер ключа 4096. Введите временной интервал, в течение которого ключ должен быть действительным. Нажмите Enter для выбора по умолчанию. Проверьте введенные данные и введите свои идентификационные данные и пароль для защиты закрытого ключа.</p>
                                <p>Для отображения списка пар ключей используйте команду:</p>
                                <div class="highlighter-rouge"><pre class="codehilite"><code>gpg --list-secret-keys --keyid-format LONG
</code></pre></div>
                                <p>вывод</p>
                                <div class="highlighter-rouge"><pre class="codehilite"><code>/home/vbagaev//.gnupg/pubring.kbx
---------------------------------
sec   rsa2048/68FDE2D277BED407 2017-01-20 [SC]
uid               [  абсолютно ] Valeriy Bagaev (front-end developer) &lt;valery.bagaev84@gmail.com&gt;
ssb   rsa2048/8E033C3CF527A4CB 2017-01-20 [E]
</code></pre></div>
                                <p>В приведенном выше сниппете 68FDE2D277BED407 - это идентификатор пары ключей, key ID. Во всех перечисленных командах вместо key ID можно использовать и имя пользователя и его e-mail.</p>
                                <p>Итак создав ключевую пару мы может использовать ее для шифрование почты или файлов.</p>
                                <h2 id="thunderbird---gnupg">Использование почтовой программы Thunderbird совместно с GnuPG</h2>
                                <p>Для того чтобы можно было спокойно принимать и отправлять почту в Mozilla Thunderbird необходимо установить расширение Enigmail, которое позволяет работать с шифровальными возможностями GnuPG прямо из Thunderbird.</p>
                                <p>Установив расширение настраиваем его, выбрав стандартную конфигуацию. Перед тем, как отправлять друг другу зашифрованные письма, необходимо обменяться открытыми ключами. Следует также удостовериться, что каждый такой ключ действительно принадлежит его владельцу.</p>
                                <p>Чтобы отправить публичный ключ адресату выполните следующие действия. В окне создания письма выберите меню Enigmail &gt; Присоединить мой открытый ключ. Выберите ключ и отправьте письмо. Противоположный адресат также должен прислать вам свой открытый ключ.</p>
                                <p>Для импортирования присланного Вам ключа необходимо щелкнуть правой кнопкой на вложении и выбрать пункт Импорт ключа OpenPGP.</p>
                                <p>Теперь нужно удостовериться, что полученный вами ключ действительно принадлежит его владельцу. Проверив ключ, вы должны подписать его. Для этого выберите Enigmail &gt; Менеджер ключей, щелкаем правой кнопкой по присланному ключу и выбираем пункт Подписать ключ. Теперь Вы спокойно можете обмениваться шифрованными письмами со своим собеседником.</p>
                                <p>Отправка зашифрованного письма происходит так, составляем сообщение для адресата, чей открытый ключ у Вас есть. Затем нажимаем на кнопку с замком на панели инструментов, чтобы зашифровать сообщение или на кнопку с карандашом, чтобы только подписать. Если в программе есть есть открытый ключ адресата, то появится сообщение — This message will be signed encrypted.</p>
                                <p>Чтобы расшифровать сообщение, достаточно просто открыть его и ввести пароль от вашего секретного ключа.</p>
                                <h2 id="gnupg---">Использование утилиты GnuPG в командной строке</h2>
                                <p>GnuPG создает в домашней папке пользователя скрытую директорию .gnupg. В ней содержатся все открытые и закрытые ключи, а также файл конфигурации gpg.conf. Бывает полезно в нем указать закрытый ключ по умолчанию. Найдите директивы default-key и default-recipient-self , раскомментируйте их и укажите сигнатуру вашей пары ключей. Теперь утилита по умолчанию будет использовать именно их.</p>
                                <p>Шифрование файлов:</p>
                                <div class="highlighter-rouge"><pre class="codehilite"><code>gpg -e -o somefile.gpg somefile
</code></pre></div>
                                <p>Чтобы зашифровать не дефолтным ключом:</p>
                                <div class="highlighter-rouge"><pre class="codehilite"><code>gpg -e -r key ID somefile
</code></pre></div>
                                <p>Расшифровывание файла:</p>
                                <div class="highlighter-rouge"><pre class="codehilite"><code>gpg -d -o somefile somefile.gpg
</code></pre></div>
                                <p>Чтобы подписать файл необходимо с помощью параметра -u указать какой ключ использовать:</p>
                                <div class="highlighter-rouge"><pre class="codehilite"><code>gpg -u key ID --detach-sign somefile
</code></pre></div>
                                <p>Будет подписан файл и создан файл подписи somefile.sig. Если хотите зашифровать файл и одновременно подписать его следует использовать команду:</p>
                                <div class="highlighter-rouge"><pre class="codehilite"><code>gpg -u key ID -s somefile
</code></pre></div>
                                <p>Для проверки подписи и расшифровывания файла используйте команду:</p>
                                <div class="highlighter-rouge"><pre class="codehilite"><code>gpg --output somefile --decrypt somefile.gpg
</code></pre></div>
                                <p>Или же команду, если файл подписи расположен рядом на диске.:</p>
                                <div class="highlighter-rouge"><pre class="codehilite"><code>gpg --verify somefile.sig
</code></pre></div>
                                <h2 id="section-1">Другие полезные команды</h2>
                                <p>Чтобы экспортировать публичный ключ используйте команду:</p>
                                <div class="highlighter-rouge"><pre class="codehilite"><code>gpg --armor --export key ID
</code></pre></div>
                                <p>Для экспорта в файл можно использовать с параметром —output.</p>
                                <div class="highlighter-rouge"><pre class="codehilite"><code>gpg --armor --output somefile.asc --export key ID 
</code></pre></div>
                                <p>Для экспорта закрытого ключа:</p>
                                <div class="highlighter-rouge"><pre class="codehilite"><code>gpg --armor --output somefile.key --export-secret-keys key ID
</code></pre></div>
                                <p>Импортирование как закрытых, так и открытых ключей осуществятся командой, где somefile — файл ключа.</p>
                                <div class="highlighter-rouge"><pre class="codehilite"><code>gpg --import  somefile
</code></pre></div>
                                <p>Также можно прямо из командной строки зарегистрировать ключ на сервере ключей (например pgp.mit.edu ).</p>
                                <div class="highlighter-rouge"><pre class="codehilite"><code>gpg  --keyserver pgp.mit.edu —send-keys key ID
</code></pre></div>
                                <p>На этом все. Надеюсь эта запись была вам полезна.</p>
                                <h2 id="section-2">Дополнительные ссылки</h2>
                                <p>Официальный сайт <a href="https://www.gnupg.org/">GnuPG</a>
                                    <a href="https://ru.wikipedia.org/wiki/PGP">PGP</a> [Wiki по Gnupg](https://wiki.archlinux.org/index.php/GnuPG_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)</p>
                            </div>
                        </div>
                    </main>
                </div>
            </div>
        </div>
    </div>
    <div class="footer">
        <div class="container">
            <div class="footer__left">
                <div class="copyright">&copy; Багаев Валерий Владимирович</div>
            </div>
            <div class="footer__right">
                <ul class="socials">
                    <li class="socials__item">
                        <a href="#" class="socials__link socials__link_fb"></a>
                    </li>
                    <li class="socials__item">
                        <a href="#" class="socials__link socials__link_vk"></a>
                    </li>
                    <li class="socials__item">
                        <a href="#" class="socials__link socials__link_tw"></a>
                    </li>
                    <li class="socials__item">
                        <a href="#" class="socials__link socials__link_gh"></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <script src="/js/vendor/jquery/jquery.min.js"></script>
    <script src="/js/vendor/plugins.js"></script>
    <script>
    jQuery(document).ready(function() {
        jQuery('.scrollbar-outer').scrollbar();
    });
    </script>
    <!-- <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script> -->
    <!-- <script>window.jQuery || document.write('<script src="/js/vendor/jquery.js"><\/script>')</script> -->
    <!-- <script src="/js/vendor/plugins.js"></script> -->
    <!-- <script src="/js/main.js"></script> -->
    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID.  -->
    <!-- <script>
        (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
        function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
        e=o.createElement(i);r=o.getElementsByTagName(i)[0];
        e.src='https://www.google-analytics.com/analytics.js';
        r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
        ga('create','UA-XXXXX-X','auto');ga('send','pageview');
    </script> -->
</body>

</html>
